<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Fork Bombs - blag</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- for Google -->
    <meta name="author" content="varad" />
 <meta name="description" content="<p>Playing truant with the simplest DoS attack <strong>EVER</strong></p>" /> 
    <!-- for Facebook -->          
    <meta property="og:title" content="Fork Bombs" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="/fork-bomb.html" />
 <meta property="og:description" content="<p>Playing truant with the simplest DoS attack <strong>EVER</strong></p>" /> 
    <!-- for Twitter -->
    <meta name="twitter:title" content="Fork Bombs" />
    <meta name="twitter:description" content="<p>Playing truant with the simplest DoS attack <strong>EVER</strong></p>" />
    <meta name="twitter:card" content="<p>Playing truant with the simplest DoS attack <strong>EVER</strong></p>" />

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
    <!--<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" rel="stylesheet" />-->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/theme/style.css" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="icon" href="v.png" />
  </head>
  <body id="index" class="archive">
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
     <!--  -->
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-left" style="padding-top: 5px; padding-bottom: 5px">
            <img style="border-radius: 50%; height: 40px" src="me.png" />
          </a>
          <a class="navbar-brand" style="margin-left: 5px" href="">blag</a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li ><a href="/archives.html">archives</a></li>
            <li ><a href="/tags.html">about</a></li>           
            <!--
f
            <li><a href="/tags.html">tags</a></li>
            -->
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
    <div class="container">
    <section id="content" class="article content">
      <header>
        <h2 class="entry-title">
          Fork Bombs
        </h2>
        
        <div class="text-muted">Wed 18 January 2012</div>
      </header>
<!-- .entry-content -->
      <div class="entry-content">
        <p><br/>
Today I learned about a hillariously brilliant DoS attack called a fork bomb. </p>
<p>I discovered it in the process of trying to get myself out of a mind-numbingly boring (<strong>and uncredited!</strong>) lab assignment. Without going into too much gory detail, our lab setup basically required us to design &amp; wire up a circuit to produce a particular waveform and then feed it into a simulator running on an assigned computer for further processing. Now creating the waveform was a breeze - we'd already done it several times before, this was just a minor variation, 15 minutes tops. The main focus of the lab was to do a bunch of exercises on a simulator running on Ubuntu over the next hour and a half (ugh). And, thus, we were instructed to test that the simulator was working as expected as soon as we had gotten our circuit connections verified.  </p>
<p>This simulator - which is actually a project maintained by one of the grad students - is <em>really</em> resource intensive. Open Chrome on the side and your machine would invariably start thrashing and sputter for RAM. So, we were explicitly told to not have any other programs open while working with the simulator. I figured if I could find a way to run a super resource intensive daemon, the simulator would hang continuously and I could get to skip the lab since all the other machines were occupied. The trick was to make it as untraceable as possible and also not require any special privileges (read <code>root</code> access). A few Google searches after finishing my wiring, I found my solution in the <a href="https://en.wikipedia.org/wiki/Fork_bomb">fork bomb</a>.
<br/><br/></p>
<h4>So how does it work?</h4>
<p>The premise of the fork bomb is devastatingly simple. Any individual program / piece of software running on a computer runs as its own dedicated process. A fork bomb basically asks the process to replicate itself infinitely, eventually consuming all of the CPU's time in generating the fork processes and saturating the OS's process table. As a result, no other programs can run on the system and you are frced to reboot. Process replication is done using the <a href="http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/create.html">fork()</a> system call on Unix systems, hence the name fork bomb.</p>
<p>My favorite implementation of the fork bomb was this Bash script I found online - <br/></p>
<div class="highlight"><pre><span></span>:<span class="o">()</span> <span class="o">{</span>:<span class="p">|</span>: <span class="p">&amp;</span><span class="o">}</span><span class="p">;</span>:
</pre></div>


<p><br/>
Let's break down this elegant statement.<br/></p>
<ul>
<li>The main point to note here is that <code>:</code> is the name assigned to a function - <code>()</code> qualifies it as a function, with the symbols contained within the <code>{</code> and <code>}</code> curly brackets is the function body ended by the <code>;</code> demarcation.<br/></li>
<li>The function body <code>:|: &amp;</code> is basically a recursive call to the function <code>:</code> with the additional instruction to pipe (<code>|</code>) its output back to the <code>:</code> function. While the <code>&amp;</code> indicates that this process be run in the background.<br/></li>
<li>The last <code>:</code> is the seed call to the <code>:</code> function and where the havoc really begins. 
<br/>
Essentially the <code>:</code> function ends up calling itself twice everytime, seemingly infintely. This results in an exponential increase in the number of processes, eventually exhausting the physical &amp; swap memory on the machine. Beyond that, no other programs can be run, your machine jams up and you are forced to reboot it to kill all running processes and clear the process table.
<br/><br/></li>
</ul>
<h4>Deploying it</h4>
<hr>
<p>After doing a test run, I rebooted the computer. To ensure that they got the probem without rousing any suspicion, I added it in as a cronjob to run every few minutes, so they'd be convinced that the ancient machines in our lab were likely unable to handle the resource intensive simulator. This was done by running <code>crontab -e</code> and adding - </p>
<div class="highlight"><pre><span></span> */2 * * * * :() {:|: &amp;};:
</pre></div>


<p>to it. 
<br/><br/></p>
<h4>Moment of Truth</h4>
<hr>
<p>At the 20th minute of the lab, I had my setup ready. And they bit! Since it ran every 2 minutes, it was usually enough time to launch the simulator after the multiple reboots that the lab assistants went through. Of course, I lucked out that this was an uncredited lab staffed with assistants more conversant with power electronics but a fairly specious knowledge of computers, so none of them thought to run <code>top</code> and find the source of the problem. There was also some suspicion as to why this had occurred suddenly out-of-the-blue, when the machine had worked well for multiple previous iterations of the lab - I ducked around that by fabricating an explanation of how the simulator might be causing thrashing on the machine and due to the age of the HDD inside, the performance was likely degraded further. Kinda hilarious that I actually managed to convince them on that - just goes to show that you need to know your audience.</p>
<p>And so, after 15 minutes of trying and failing to get my machine running, I was excused to wait out the rest of the lab. I took a toilet break, went to get a donut instead and just spent the rest of the afternoon lounging around, gloriously doing nothing. Probably need to face the music next week. But hey, I <em>did</em> learn something. Who cares if it's not exactly what I was supposed to.</p>
      </div>
<!-- /.entry-content -->
      <footer class="post-info text-muted">
        <button type="button" class="btn btn-default">          
          <a href="/category/random.html"><div class="fa fa-lg fa-folder-open"></div> Random</a>
        </button>
      </footer>
      <!-- /.post-info -->
<!-- Comment BEGIN -->
<div id="disqus_thread" style="margin-top: 30px"></div>
<script type="text/javascript">
    var disqus_shortname = 'blag';
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!-- Comment END -->
    </section>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="footer-text">&copy; <a href="">blag</a> powered by <a href="http://getpelican.com/">pelican</a> with <a href="https://github.com/avinassh/skyfall">skyfall</a> theme.</p>
      </div>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-117409617-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>